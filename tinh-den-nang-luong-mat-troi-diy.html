<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng c·ª• T√≠nh to√°n NƒÉng l∆∞·ª£ng M·∫∑t tr·ªùi - Ph·∫°m ƒê·ª©c Ng·ªçc Logic</title>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 20px; line-height: 1.6; }
       .container { max-width: 600px; margin: 0 auto; background: var(--card); padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        h2 { color: var(--primary); border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; margin-top: 0; }
       .step { margin-bottom: 25px; padding: 15px; border: 1px solid #e2e8f0; border-radius: 8px; }
       .step-title { font-weight: bold; margin-bottom: 15px; display: block; color: #475569; }
        label { display: block; margin-bottom: 5px; font-size: 0.9rem; }
        input, select { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #cbd5e1; border-radius: 6px; box-sizing: border-box; }
       .checkbox-group { display: flex; align-items: center; gap: 10px; background: #fffbeb; padding: 10px; border-radius: 6px; border: 1px solid #fef3c7; }
       .checkbox-group input { width: auto; margin: 0; }
        button { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: background 0.2s; }
        button:hover { background: #1d4ed8; }
        #result { margin-top: 25px; padding: 20px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; display: none; }
       .res-item { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px dashed #dcfce7; padding-bottom: 5px; }
       .res-val { font-weight: bold; color: #166534; }
       .warning { font-size: 0.8rem; color: #92400e; margin-top: -10px; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container">
    <h2>‚ö° T√≠nh to√°n H·ªá th·ªëng ƒê√®n LED</h2>
    
    <div class="step">
        <span class="step-title">B∆∞·ªõc 1: Th√¥ng s·ªë ƒë√®n & Th·ªùi gian</span>
        <label>ƒêi·ªán √°p ƒë√®n (V)</label>
        <input type="number" id="voltage" value="12" placeholder="V√≠ d·ª•: 6, 12, 24">
        
        <label>C√¥ng su·∫•t nh√£n (W)</label>
        <input type="number" id="power" value="50" placeholder="V√≠ d·ª•: 50">
        
        <div class="checkbox-group">
            <input type="checkbox" id="isRealPower">
            <label for="isRealPower">ƒê√¢y l√† c√¥ng su·∫•t th·ª±c t·∫ø (ƒë√£ ƒëo)</label>
        </div>
        <p class="warning">* N·∫øu l√† ƒë√®n Shopee 50W gi√° r·∫ª, c√¥ng su·∫•t th·ª±c th∆∞·ªùng ch·ªâ ~7.2W.</p>
        
        <label>Th·ªùi gian s·ª≠ d·ª•ng (Gi·ªù/ng√†y)</label>
        <input type="number" id="hours" value="8">
    </div>

    <div class="step">
        <span class="step-title">B∆∞·ªõc 2: Ch·ªçn lo·∫°i Pin l∆∞u tr·ªØ</span>
        <select id="batteryType">
            <option value="lead-acid">·∫Æc quy Axit-ch√¨ (DoD 50%)</option>
            <option value="lithium">Pin Lithium/LiFePO4 (DoD 90%)</option>
        </select>
    </div>

    <div class="step">
        <span class="step-title">B∆∞·ªõc 3: Ch·ªçn c√¥ng ngh·ªá s·∫°c</span>
        <select id="chargeType">
            <option value="pwm">ƒêi·ªÅu khi·ªÉn s·∫°c PWM (Hi·ªáu su·∫•t 75%)</option>
            <option value="mppt">ƒêi·ªÅu khi·ªÉn s·∫°c MPPT (Hi·ªáu su·∫•t 95%)</option>
        </select>
    </div>

    <button onclick="calculate()">T√çNH TO√ÅN K·∫æT QU·∫¢</button>

    <div id="result">
        <h3 style="margin-top:0">üìä K·∫øt qu·∫£ ƒë·ªÅ xu·∫•t</h3>
        <div class="res-item"><span>C√¥ng su·∫•t th·ª±c t√≠nh to√°n:</span> <span class="res-val" id="outRealPower">--</span></div>
        <div class="res-item"><span>NƒÉng l∆∞·ª£ng ti√™u th·ª•:</span> <span class="res-val" id="outEnergy">--</span></div>
        <div class="res-item"><span>Dung l∆∞·ª£ng Pin c·∫ßn (Ah):</span> <span class="res-val" id="outAh">--</span></div>
        <div class="res-item"><span>C√¥ng su·∫•t T·∫•m pin (Wp):</span> <span class="res-val" id="outWp">--</span></div>
        <div class="res-item"><span>Th·ªùi gian s·∫°c ƒë·∫ßy (n·∫Øng t·ªët):</span> <span class="res-val" id="outChargeTime">--</span></div>
        <p style="font-size: 0.8rem; font-style: italic; margin-top: 15px;">* T√≠nh to√°n d·ª±a tr√™n h·ªá s·ªë an to√†n 1.5x v√† 4 gi·ªù n·∫Øng ƒë·ªânh trung b√¨nh.</p>
    </div>
</div>

<script>
function calculate() {
    // L·∫•y d·ªØ li·ªáu ƒë·∫ßu v√†o
    const V = parseFloat(document.getElementById('voltage').value);
    let P = parseFloat(document.getElementById('power').value);
    const H = parseFloat(document.getElementById('hours').value);
    const isReal = document.getElementById('isRealPower').checked;
    const batType = document.getElementById('batteryType').value;
    const chargeType = document.getElementById('chargeType').value;

    // Logic hi·ªáu ch·ªânh c√¥ng su·∫•t th·ª±c (n·∫øu ch·ªçn ƒë√®n 50W Shopee m√† kh√¥ng t√≠ch "ƒë√£ ƒëo")
    if (!isReal && P >= 50) {
        P = P * 0.15; // Gi·∫£ ƒë·ªãnh th·ª±c t·∫ø ch·ªâ chi·∫øm ~15-20% c√¥ng su·∫•t nh√£n
    }

    // 1. T√≠nh nƒÉng l∆∞·ª£ng ti√™u th·ª• Wh
    const Wh = P * H;

    // 2. T√≠nh Ah Pin
    // SLA: DoD 0.5, Eff 0.85 | Lithium: DoD 0.9, Eff 0.95
    let dod = (batType === 'lead-acid')? 0.5 : 0.9;
    let batEff = (batType === 'lead-acid')? 0.85 : 0.95;
    const Ah = Wh / (V * dod * batEff);

    // 3. T√≠nh T·∫•m pin Wp (H·ªá s·ªë an to√†n 1.5, gi·ªù n·∫Øng 4h)
    let chargeEff = (chargeType === 'pwm')? 0.75 : 0.95;
    const SF = 1.5;
    const PSH = 4;
    const Wp = (Wh * SF) / (PSH * chargeEff);

    // 4. T√≠nh th·ªùi gian s·∫°c (Gi·∫£ ƒë·ªãnh d√≤ng s·∫°c trung b√¨nh)
    // Th·ªùi gian s·∫°c = Wh_c·∫ßn_n·∫°p / (Wp * Eff_s·∫°c)
    const chargeTime = (Wh / batEff) / (Wp * chargeEff);

    // Hi·ªÉn th·ªã k·∫øt qu·∫£
    document.getElementById('result').style.display = 'block';
    document.getElementById('outRealPower').innerText = P.toFixed(1) + " W";
    document.getElementById('outEnergy').innerText = Wh.toFixed(0) + " Wh/ng√†y";
    document.getElementById('outAh').innerText = Math.ceil(Ah) + " Ah";
    document.getElementById('outWp').innerText = Math.ceil(Wp) + " Wp";
    document.getElementById('outChargeTime').innerText = chargeTime.toFixed(1) + " gi·ªù n·∫Øng";
}
</script>

</body>
</html>
