<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công Cụ Tính Toán Kích Thước Tấm Pin Mặt Trời</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Neutrals with Green/Amber Accents -->
    <!-- Application Structure Plan: A single-card, task-oriented layout. The structure is a simple vertical flow: Title -> Introduction -> Input Form -> Calculate Button -> Results Section. This is the most intuitive structure for a calculator, guiding the user from input to output without any navigation or complexity. The results section is hidden by default and only appears after a successful calculation, keeping the initial view clean and focused on the task of data entry. -->
    <!-- Visualization & Content Choices: Report Info: Battery and system parameters (voltage, capacity, type, DoD, controller, charge time). Goal: Calculate the required solar panel wattage. Viz/Presentation Method: A clean HTML form for inputs. The result is a large, bold number for wattage, supplemented with a textual explanation of the parameters used and a recommendation. No charts are needed as it's a direct calculation. Interaction: The 'Battery Type' dropdown auto-suggests the default Depth of Discharge (DoD) in the placeholder, guiding the user. The 'Calculate' button validates inputs and triggers the calculation, dynamically displaying the results. Justification: This approach is direct, user-friendly, and educational, providing not just an answer but also context. Library/Method: Vanilla JS and Tailwind CSS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .form-label {
            @apply block text-gray-700 text-base font-bold mb-2;
        }
        .form-input, .form-select {
            @apply shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-5 px-4 text-gray-800 text-lg leading-tight focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition-all duration-200;
        }
        .form-input::placeholder {
            @apply text-gray-400;
        }
    </style>
</head>
<body class="bg-amber-50">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-2xl">
        <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 md:p-10">
            
            <div class="text-center mb-8">
                <img src="https://phamducngoc.com/wp-content/uploads/2025/08/pham-duc-ngoc.png" alt="Logo Phạm Đức Ngọc" class="mx-auto h-20 w-auto mb-4" onerror="this.style.display='none'">
                <a href="https://phamducngoc.com/tinh-so-tam-pin-can-de-sac-cho-pin-nang-luong-mat-troi/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:text-indigo-800 underline transition-colors font-semibold">
                    cần bao nhiêu tấm pin năng lượng mặt trời để sạc cho hệ pin của bạn
                </a>
            </div>

            <header class="text-center mb-8 border-t pt-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Công cụ tính Pin mặt trời</h1>
                <p class="text-gray-600 mt-2">Nhập thông số ắc quy của bạn để tìm ra công suất tấm pin cần thiết.</p>
            </header>

            <main>
                <form id="solar-form" class="space-y-8">
                    <div>
                        <label for="voltage" class="form-label">Điện áp Ắc quy (V)</label>
                        <input type="number" id="voltage" class="form-input" placeholder="ví dụ: 12" required>
                    </div>

                    <div>
                        <label for="amp-hours" class="form-label">Dung lượng Ắc quy (Ah)</label>
                        <input type="number" id="amp-hours" class="form-input" placeholder="ví dụ: 100" required>
                    </div>

                    <div>
                        <label for="battery-type" class="form-label">Loại Ắc quy</label>
                        <select id="battery-type" class="form-select" required>
                            <option value="">-- Chọn một loại --</option>
                            <option value="lead-acid">Axit-chì (Lead Acid)</option>
                            <option value="lithium">Lithium (LiFePO4)</option>
                        </select>
                    </div>

                    <div>
                        <label for="dod" class="form-label">Độ xả sâu của Ắc quy (DoD %)</label>
                        <input type="number" id="dod" class="form-input" placeholder="Để trống để dùng giá trị mặc định">
                        <p class="text-xs text-gray-500 mt-1">Không bắt buộc. Mặc định là 50% cho Axit-chì và 100% cho Lithium.</p>
                    </div>

                    <div>
                        <label for="controller-type" class="form-label">Loại Bộ điều khiển Sạc</label>
                        <select id="controller-type" class="form-select" required>
                            <option value="">-- Chọn một loại --</option>
                            <option value="pwm">PWM</option>
                            <option value="mppt">MPPT</option>
                        </select>
                    </div>

                    <div>
                        <label for="charge-time" class="form-label">Thời gian sạc mong muốn (giờ nắng đỉnh)</label>
                        <input type="number" id="charge-time" class="form-input" placeholder="ví dụ: 5" required>
                    </div>

                    <div class="pt-4">
                        <button type="submit" class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-4 text-lg rounded-lg focus:outline-none focus:shadow-outline transition-all duration-300 transform hover:scale-105">
                            Tính Toán
                        </button>
                    </div>
                </form>

                <div id="result-section" class="mt-10 p-6 bg-green-50 border border-green-200 rounded-2xl text-center hidden">
                     <h2 class="text-2xl font-bold text-green-800">Kết quả tính toán</h2>
                     <p class="text-gray-600 mt-2 mb-4">Dựa trên thông số bạn cung cấp, đây là công suất tối thiểu được đề xuất cho hệ thống pin mặt trời của bạn.</p>
                     <div class="bg-white p-6 rounded-xl shadow-inner">
                        <p class="text-5xl font-bold text-green-700" id="result-watts">0 W</p>
                        <p class="text-sm text-gray-500 mt-2">Công suất tấm pin mặt trời cần thiết</p>
                     </div>
                     <div class="text-left text-sm text-gray-600 mt-4 p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold mb-2">Lưu ý:</h4>
                        <p>Kết quả này là một ước tính. Nó đã tính đến hiệu suất của bộ điều khiển sạc (ước tính 95% cho MPPT và 80% cho PWM) và các yếu tố khác. Để có kết quả chính xác hơn, bạn nên tham khảo ý kiến của chuyên gia.</p>
                    </div>
                </div>

                <div id="error-message" class="mt-6 p-4 bg-red-100 border border-red-300 text-red-800 rounded-lg text-center hidden">
                </div>

            </main>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('solar-form');
            const batteryTypeSelect = document.getElementById('battery-type');
            const dodInput = document.getElementById('dod');
            const resultSection = document.getElementById('result-section');
            const resultWatts = document.getElementById('result-watts');
            const errorMessage = document.getElementById('error-message');

            batteryTypeSelect.addEventListener('change', () => {
                if (batteryTypeSelect.value === 'lead-acid') {
                    dodInput.placeholder = 'Mặc định: 50%';
                } else if (batteryTypeSelect.value === 'lithium') {
                    dodInput.placeholder = 'Mặc định: 100%';
                } else {
                    dodInput.placeholder = 'Để trống để dùng giá trị mặc định';
                }
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                errorMessage.classList.add('hidden');
                resultSection.classList.add('hidden');

                const voltage = parseFloat(document.getElementById('voltage').value);
                const ampHours = parseFloat(document.getElementById('amp-hours').value);
                const batteryType = document.getElementById('battery-type').value;
                let dodValue = parseFloat(dodInput.value);
                const controllerType = document.getElementById('controller-type').value;
                const chargeTime = parseFloat(document.getElementById('charge-time').value);

                if (isNaN(voltage) || isNaN(ampHours) || !batteryType || !controllerType || isNaN(chargeTime) || voltage <= 0 || ampHours <= 0 || chargeTime <= 0) {
                    showError('Vui lòng điền đầy đủ và chính xác tất cả các trường bắt buộc.');
                    return;
                }
                
                let dod;
                if (!isNaN(dodValue) && dodValue > 0 && dodValue <= 100) {
                    dod = dodValue / 100;
                } else if (!isNaN(dodValue)) {
                    showError('Độ xả sâu (DoD) phải là một giá trị trong khoảng từ 1 đến 100.');
                    return;
                } else {
                    dod = batteryType === 'lead-acid' ? 0.5 : 1.0;
                }

                const controllerEfficiency = controllerType === 'pwm' ? 0.80 : 0.95;

                const totalWattHours = voltage * ampHours;
                const usableWattHours = totalWattHours * dod;
                const requiredWatts = usableWattHours / (chargeTime * controllerEfficiency);

                resultWatts.textContent = `${Math.ceil(requiredWatts)} W`;
                resultSection.classList.remove('hidden');
                
                resultSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            }
        });
    </script>

</body>
</html>





